#!/bin/bash
sbt "project hello-impl" "dist" &&\

# todo: do this in SBT
docker build -f hello-impl.dockerfile . -t hello-impl:latest

# cd hello-impl/target/universal &&\
# unzip -q -o hello-impl-1.0-SNAPSHOT.zip && \

# export APP_LIB=hello-impl-1.0-SNAPSHOT/lib &&\
# export APP_CLASSPATH=$APP_LIB/* &&\
# export JAVA_OPTS="" &&\
# export JMX_CONFIG="" &&\
# export PLAY_SECRET="abc123wsx321" &&\
# export CONFIG_FILE=/d/code/lagom-k8s/hello-impl/src/main/resources/application.conf &&\
# export CONFIG="-Dplay.crypto.secret=$PLAY_SECRET -Dplay.http.secret.key=$PLAY_SECRET -Dlagom.cluster.join-self=off -Dorg.xerial.snappy.use.systemlib=true -Dconfig.file=$CONFIG_FILE" &&\
# export PLAY_SERVER_START="play.core.server.ProdServerStart" &&\

# java -cp "$APP_CLASSPATH" $JAVA_OPTS $JMX_CONFIG $CONFIG $PLAY_SERVER_START

java -cp hello-impl-1.0-SNAPSHOT/lib/ch.qos.logback.logback-classic-1.2.3.jar hello-impl-1.0-SNAPSHOT/lib/ch.qos.logback.logback-core-1.2.3.jar hello-impl-1.0-SNAPSHOT/lib/com.afawfaaw.hello-api-1.0-SNAPSHOT.jar hello-impl-1.0-SNAPSHOT/lib/com.afawfaaw.hello-impl-1.0-SNAPSHOT.jar hello-impl-1.0-SNAPSHOT/lib/com.datastax.cassandra.cassandra-driver-core-3.7.2.jar hello-impl-1.0-SNAPSHOT/lib/com.fasterxml.jackson.core.jackson-annotations-2.10.4.jar hello-impl-1.0-SNAPSHOT/lib/com.fasterxml.jackson.core.jackson-core-2.10.4.jar hello-impl-1.0-SNAPSHOT/lib/com.fasterxml.jackson.core.jackson-databind-2.10.4.jar hello-impl-1.0-SNAPSHOT/lib/com.fasterxml.jackson.dataformat.jackson-dataformat-cbor-2.10.4.jar hello-impl-1.0-SNAPSHOT/lib/com.fasterxml.jackson.datatype.jackson-datatype-guava-2.10.4.jar hello-impl-1.0-SNAPSHOT/lib/com.fasterxml.jackson.datatype.jackson-datatype-jdk8-2.10.4.jar hello-impl-1.0-SNAPSHOT/lib/com.fasterxml.jackson.datatype.jackson-datatype-jsr310-2.10.4.jar hello-impl-1.0-SNAPSHOT/lib/com.fasterxml.jackson.datatype.jackson-datatype-pcollections-2.10.4.jar hello-impl-1.0-SNAPSHOT/lib/com.fasterxml.jackson.module.jackson-module-parameter-names-2.10.4.jar hello-impl-1.0-SNAPSHOT/lib/com.fasterxml.jackson.module.jackson-module-paranamer-2.10.4.jar hello-impl-1.0-SNAPSHOT/lib/com.fasterxml.jackson.module.jackson-module-scala_2.13-2.10.4.jar hello-impl-1.0-SNAPSHOT/lib/com.github.jnr.jffi-1.2.22.jar hello-impl-1.0-SNAPSHOT/lib/com.github.jnr.jnr-a64asm-1.0.0.jar hello-impl-1.0-SNAPSHOT/lib/com.github.jnr.jnr-constants-0.9.14.jar hello-impl-1.0-SNAPSHOT/lib/com.github.jnr.jnr-ffi-2.1.10.jar hello-impl-1.0-SNAPSHOT/lib/com.github.jnr.jnr-posix-3.0.50.jar hello-impl-1.0-SNAPSHOT/lib/com.github.jnr.jnr-x86asm-1.0.2.jar hello-impl-1.0-SNAPSHOT/lib/com.github.luben.zstd-jni-1.3.7-1.jar hello-impl-1.0-SNAPSHOT/lib/com.google.code.findbugs.jsr305-3.0.2.jar hello-impl-1.0-SNAPSHOT/lib/com.google.errorprone.error_prone_annotations-2.3.4.jar hello-impl-1.0-SNAPSHOT/lib/com.google.guava.failureaccess-1.0.1.jar hello-impl-1.0-SNAPSHOT/lib/com.google.guava.guava-28.2-jre.jar hello-impl-1.0-SNAPSHOT/lib/com.google.guava.listenablefuture-9999.0-empty-to-avoid-conflict-with-guava.jar hello-impl-1.0-SNAPSHOT/lib/com.google.j2objc.j2objc-annotations-1.3.jar hello-impl-1.0-SNAPSHOT/lib/com.hierynomus.asn-one-0.4.0.jar hello-impl-1.0-SNAPSHOT/lib/com.lightbend.akka.management.akka-management_2.13-1.0.5.jar hello-impl-1.0-SNAPSHOT/lib/com.lightbend.akka.management.akka-management-cluster-bootstrap_2.13-1.0.5.jar hello-impl-1.0-SNAPSHOT/lib/com.lightbend.akka.management.akka-management-cluster-http_2.13-1.0.5.jar hello-impl-1.0-SNAPSHOT/lib/com.lightbend.lagom.lagom-akka-management-core_2.13-1.6.4.jar hello-impl-1.0-SNAPSHOT/lib/com.lightbend.lagom.lagom-akka-management-scaladsl_2.13-1.6.4.jar hello-impl-1.0-SNAPSHOT/lib/com.lightbend.lagom.lagom-api_2.13-1.6.4.jar hello-impl-1.0-SNAPSHOT/lib/com.lightbend.lagom.lagom-client_2.13-1.6.4.jar hello-impl-1.0-SNAPSHOT/lib/com.lightbend.lagom.lagom-cluster-core_2.13-1.6.4.jar hello-impl-1.0-SNAPSHOT/lib/com.lightbend.lagom.lagom-kafka-broker_2.13-1.6.4.jar hello-impl-1.0-SNAPSHOT/lib/com.lightbend.lagom.lagom-kafka-client_2.13-1.6.4.jar hello-impl-1.0-SNAPSHOT/lib/com.lightbend.lagom.lagom-logback_2.13-1.6.4.jar hello-impl-1.0-SNAPSHOT/lib/com.lightbend.lagom.lagom-persistence-cassandra-core_2.13-1.6.4.jar hello-impl-1.0-SNAPSHOT/lib/com.lightbend.lagom.lagom-persistence-core_2.13-1.6.4.jar hello-impl-1.0-SNAPSHOT/lib/com.lightbend.lagom.lagom-persistence-testkit_2.13-1.6.4.jar hello-impl-1.0-SNAPSHOT/lib/com.lightbend.lagom.lagom-projection-core_2.13-1.6.4.jar hello-impl-1.0-SNAPSHOT/lib/com.lightbend.lagom.lagom-scaladsl-api_2.13-1.6.4.jar hello-impl-1.0-SNAPSHOT/lib/com.lightbend.lagom.lagom-scaladsl-broker_2.13-1.6.4.jar hello-impl-1.0-SNAPSHOT/lib/com.lightbend.lagom.lagom-scaladsl-client_2.13-1.6.4.jar hello-impl-1.0-SNAPSHOT/lib/com.lightbend.lagom.lagom-scaladsl-cluster_2.13-1.6.4.jar hello-impl-1.0-SNAPSHOT/lib/com.lightbend.lagom.lagom-scaladsl-dev-mode_2.13-1.6.4.jar hello-impl-1.0-SNAPSHOT/lib/com.lightbend.lagom.lagom-scaladsl-kafka-broker_2.13-1.6.4.jar hello-impl-1.0-SNAPSHOT/lib/com.lightbend.lagom.lagom-scaladsl-kafka-client_2.13-1.6.4.jar hello-impl-1.0-SNAPSHOT/lib/com.lightbend.lagom.lagom-scaladsl-persistence_2.13-1.6.4.jar hello-impl-1.0-SNAPSHOT/lib/com.lightbend.lagom.lagom-scaladsl-persistence-cassandra_2.13-1.6.4.jar hello-impl-1.0-SNAPSHOT/lib/com.lightbend.lagom.lagom-scaladsl-play-json_2.13-1.6.4.jar hello-impl-1.0-SNAPSHOT/lib/com.lightbend.lagom.lagom-scaladsl-projection_2.13-1.6.4.jar hello-impl-1.0-SNAPSHOT/lib/com.lightbend.lagom.lagom-scaladsl-server_2.13-1.6.4.jar hello-impl-1.0-SNAPSHOT/lib/com.lightbend.lagom.lagom-server_2.13-1.6.4.jar hello-impl-1.0-SNAPSHOT/lib/com.lightbend.lagom.lagom-service-registry-client-core_2.13-1.6.4.jar hello-impl-1.0-SNAPSHOT/lib/com.lightbend.lagom.lagom-spi_2.13-1.6.4.jar hello-impl-1.0-SNAPSHOT/lib/com.thoughtworks.paranamer.paranamer-2.8.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.akka.akka-actor_2.13-2.6.8.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.akka.akka-actor-testkit-typed_2.13-2.6.8.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.akka.akka-actor-typed_2.13-2.6.8.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.akka.akka-cluster_2.13-2.6.8.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.akka.akka-cluster-sharding_2.13-2.6.8.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.akka.akka-cluster-sharding-typed_2.13-2.6.8.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.akka.akka-cluster-tools_2.13-2.6.8.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.akka.akka-cluster-typed_2.13-2.6.8.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.akka.akka-coordination_2.13-2.6.8.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.akka.akka-discovery_2.13-2.6.8.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.akka.akka-distributed-data_2.13-2.6.8.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.akka.akka-http_2.13-10.1.12.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.akka.akka-http-core_2.13-10.1.12.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.akka.akka-http-spray-json_2.13-10.1.12.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.akka.akka-parsing_2.13-10.1.12.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.akka.akka-persistence_2.13-2.6.8.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.akka.akka-persistence-cassandra_2.13-0.103.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.akka.akka-persistence-query_2.13-2.6.8.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.akka.akka-persistence-typed_2.13-2.6.8.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.akka.akka-pki_2.13-2.6.8.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.akka.akka-protobuf-v3_2.13-2.6.8.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.akka.akka-remote_2.13-2.6.8.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.akka.akka-serialization-jackson_2.13-2.6.8.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.akka.akka-slf4j_2.13-2.6.8.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.akka.akka-stream_2.13-2.6.8.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.akka.akka-stream-kafka_2.13-1.1.0.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.akka.akka-testkit_2.13-2.6.8.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.config-1.4.0.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.netty.netty-reactive-streams-2.0.4.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.play.build-link-2.8.2.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.play.cachecontrol_2.13-2.0.0.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.play.play_2.13-2.8.2.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.play.play-ahc-ws_2.13-2.8.2.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.play.play-ahc-ws-standalone_2.13-2.1.2.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.play.play-akka-http-server_2.13-2.8.2.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.play.play-exceptions-2.8.2.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.play.play-functional_2.13-2.8.1.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.play.play-json_2.13-2.8.1.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.play.play-server_2.13-2.8.2.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.play.play-streams_2.13-2.8.2.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.play.play-ws_2.13-2.8.2.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.play.play-ws-standalone_2.13-2.1.2.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.play.play-ws-standalone-json_2.13-2.1.2.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.play.play-ws-standalone-xml_2.13-2.1.2.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.play.shaded-asynchttpclient-2.1.2.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.play.shaded-oauth-2.1.2.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.play.twirl-api_2.13-1.5.0.jar hello-impl-1.0-SNAPSHOT/lib/com.typesafe.ssl-config-core_2.13-0.4.2.jar hello-impl-1.0-SNAPSHOT/lib/io.dropwizard.metrics.metrics-core-3.2.6.jar hello-impl-1.0-SNAPSHOT/lib/io.jsonwebtoken.jjwt-0.9.1.jar hello-impl-1.0-SNAPSHOT/lib/io.netty.netty-buffer-4.1.50.Final.jar hello-impl-1.0-SNAPSHOT/lib/io.netty.netty-codec-4.1.50.Final.jar hello-impl-1.0-SNAPSHOT/lib/io.netty.netty-codec-http-4.1.50.Final.jar hello-impl-1.0-SNAPSHOT/lib/io.netty.netty-common-4.1.50.Final.jar hello-impl-1.0-SNAPSHOT/lib/io.netty.netty-handler-4.1.50.Final.jar hello-impl-1.0-SNAPSHOT/lib/io.netty.netty-resolver-4.1.50.Final.jar hello-impl-1.0-SNAPSHOT/lib/io.netty.netty-transport-4.1.50.Final.jar hello-impl-1.0-SNAPSHOT/lib/io.spray.spray-json_2.13-1.3.5.jar hello-impl-1.0-SNAPSHOT/lib/jakarta.activation.jakarta.activation-api-1.2.2.jar hello-impl-1.0-SNAPSHOT/lib/jakarta.transaction.jakarta.transaction-api-1.3.3.jar hello-impl-1.0-SNAPSHOT/lib/jakarta.xml.bind.jakarta.xml.bind-api-2.3.3.jar hello-impl-1.0-SNAPSHOT/lib/javax.cache.cache-api-1.1.1.jar hello-impl-1.0-SNAPSHOT/lib/javax.inject.javax.inject-1.jar hello-impl-1.0-SNAPSHOT/lib/joda-time.joda-time-2.10.5.jar hello-impl-1.0-SNAPSHOT/lib/log4j.log4j-1.2.17.jar hello-impl-1.0-SNAPSHOT/lib/org.agrona.agrona-1.4.1.jar hello-impl-1.0-SNAPSHOT/lib/org.apache.kafka.kafka-clients-2.1.1.jar hello-impl-1.0-SNAPSHOT/lib/org.checkerframework.checker-qual-2.10.0.jar hello-impl-1.0-SNAPSHOT/lib/org.lmdbjava.lmdbjava-0.7.0.jar hello-impl-1.0-SNAPSHOT/lib/org.lz4.lz4-java-1.7.1.jar hello-impl-1.0-SNAPSHOT/lib/org.ow2.asm.asm-7.2.jar hello-impl-1.0-SNAPSHOT/lib/org.ow2.asm.asm-analysis-7.2.jar hello-impl-1.0-SNAPSHOT/lib/org.ow2.asm.asm-commons-7.2.jar hello-impl-1.0-SNAPSHOT/lib/org.ow2.asm.asm-tree-7.2.jar hello-impl-1.0-SNAPSHOT/lib/org.ow2.asm.asm-util-7.2.jar hello-impl-1.0-SNAPSHOT/lib/org.pcollections.pcollections-3.0.5.jar hello-impl-1.0-SNAPSHOT/lib/org.reactivestreams.reactive-streams-1.0.3.jar hello-impl-1.0-SNAPSHOT/lib/org.scala-lang.modules.scala-collection-compat_2.13-2.1.2.jar hello-impl-1.0-SNAPSHOT/lib/org.scala-lang.modules.scala-java8-compat_2.13-0.9.1.jar hello-impl-1.0-SNAPSHOT/lib/org.scala-lang.modules.scala-parser-combinators_2.13-1.1.2.jar hello-impl-1.0-SNAPSHOT/lib/org.scala-lang.modules.scala-xml_2.13-1.2.0.jar hello-impl-1.0-SNAPSHOT/lib/org.scala-lang.scala-library-2.13.0.jar hello-impl-1.0-SNAPSHOT/lib/org.scala-lang.scala-reflect-2.13.0.jar hello-impl-1.0-SNAPSHOT/lib/org.slf4j.jcl-over-slf4j-1.7.30.jar hello-impl-1.0-SNAPSHOT/lib/org.slf4j.jul-to-slf4j-1.7.30.jar hello-impl-1.0-SNAPSHOT/lib/org.slf4j.log4j-over-slf4j-1.7.30.jar hello-impl-1.0-SNAPSHOT/lib/org.slf4j.slf4j-api-1.7.30.jar hello-impl-1.0-SNAPSHOT/lib/org.xerial.snappy.snappy-java-1.1.7.2.jar -Dplay.crypto.secret=abc123wsx321 -Dplay.http.secret.key=abc123wsx321 -Dlagom.cluster.join-self=off -Dorg.xerial.snappy.use.systemlib=true -Dconfig.file=/d/code/lagom-k8s/hello-impl/src/main/resources/application.conf play.core.server.ProdServerStart